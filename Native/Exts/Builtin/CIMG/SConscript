#
# Copyright 2010-2011 Fabric Technologies Inc. All rights reserved.
#

Import( 'extsEnv', 'ExtSLName', 'buildOS', 'tiffFlags' )

cimgPluginEnv = extsEnv.Clone()
sources = Glob('*.cpp')
if buildOS == "Windows":
  sources.append(Glob('../../../ThirdParty/Private/jpeglib/*.c'))
  cimgPluginEnv.Append(CPPPATH = ['../../../ThirdParty/Private/jpeglib'])

cimgPluginEnv.MergeFlags(tiffFlags)
cimgPlugin = cimgPluginEnv.SharedLibrary( ExtSLName('FabricCIMG'), sources ),
cimgManifest = cimgPluginEnv.File('FabricCIMG.fpm.json'),
cimgKL = cimgPluginEnv.File('FabricCIMG.kl'),
cimgFiles = [cimgManifest, cimgPlugin, cimgKL]

Return( 'cimgFiles' )
